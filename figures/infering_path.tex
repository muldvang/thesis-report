\tikzsetnextfilename{infering_path}
\begin{tikzpicture}[
  font=\scriptsize,
  ]
  \tikzstyle{matrix} = [minimum width=7mm, minimum height=7mm];
  \tikzstyle{vector} = [minimum width=3mm, inner sep=0mm, minimum height=7mm];

  \tikzstyle{symbol} = [matrix, draw=black];
  \tikzstyle{delta}  = [vector, draw=gray, text=gray];
  \tikzstyle{delta'} = [delta, draw=black, text=black];

  \node[symbol] (y10) at (0, 3) {1};
  \node[symbol] (y9) at (1, 3) {0};
  \node[symbol] (y8) at (2, 3) {0};
  \node[symbol] (y7) at (3, 3) {1};
  \node[symbol] (y6) at (4, 3) {0};
  \node[symbol] (y5) at (5, 3) {0};
  \node[symbol] (y4) at (6, 3) {0};
  \node[symbol, thick] (y3) at (7, 3) {1};
  \node[symbol, thick] (y2) at (8, 3) {0};
  \node[symbol, vector, thick] (y1) at (9, 3) {1};

  \node[symbol] (y+7) at (0, 2) {2};
  \node[symbol] (y+6) at (2, 2) {0};
  \node[symbol] (y+5) at (3, 2) {2};
  \node[symbol] (y+4) at (5, 2) {0};
  \node[symbol] (y+3) at (6, 2) {0};
  \node[symbol, thick] (y+2) at (7, 2) {2};
  \node[symbol, vector] (y+1) at (9, 2) {1};

  \node[symbol] (y'5) at (0, 1) {3};
  \node[symbol, thick] (y'4) at (3, 1) {3};
  \node[symbol] (y'3) at (6, 1) {0};
  \node[symbol] (y'2) at (7, 1) {2};
  \node[symbol, vector] (y'1) at (9, 1) {1};

  \node[left of=y10] {$Y_{1:10}$};
  \node[left of=y'5] {$Y_{1:5}'$};

  \path (y10) edge[dotted] (y+7);
  \path (y9) edge[dotted] (y+7);

  \path (y7) edge[dotted] (y+5);
  \path (y6) edge[dotted] (y+5);

  \path (y3) edge (y+2);
  \path (y2) edge (y+2);

  \path (y+7) edge[dotted] (y'5);
  \path (y+6) edge[dotted] (y'5);

  \path (y+5) edge (y'4);
  \path (y+4) edge (y'4);

  \node[delta'] (d10) at (0, -0.9) {$\delta_{10}$};
  \node[delta]  (d9)  at (1, -0.8) {$\delta_9$};
  \node[delta]  (d8)  at (2, -0.7) {$\delta_8$};
  \node[delta'] (d7)  at (3, -0.6) {$\delta_7$};
  \node[delta]  (d6)  at (4, -0.5) {$\delta_6$};
  \node[delta]  (d5)  at (5, -0.4) {$\delta_5$};
  \node[delta'] (d4)  at (6, -0.3) {$\delta_4$};
  \node[delta'] (d3)  at (7, -0.2) {$\delta_3$};
  \node[delta]  (d2)  at (8, -0.1) {$\delta_2$};
  \node[delta'] (d1)  at (9, 0) {$\delta_1$};

  \path (y'5) edge (d10);
  \path (y'4) edge (d7);
  \path (y'3) edge (d4);
  \path (y'2) edge (d3);
  \path (y'1) edge (d1);

  \path (d1) edge (d3);
  \path (d3) edge (d4);
  \path (d4) edge (d7);
  \path (d7) edge (d10);

  \path[->,  >=stealth'] (9, 3.5) edge node[above] {Sequence} (0, 3.5);
  \path[->,  >=stealth'] (9.5, 3) edge node[rotate=90,below] {Time} (9.5, -3);

  \node (s'5) at (0, -2) {$p_5'$};
  \node       at (3, -2) {$p_4'$};
  \node       at (6, -2) {$p_3'$};
  \node       at (7, -2) {$p_2'$};
  \node       at (9, -2) {$p_1'$};

  \node (s10) at (0, -3) {$p_{10}$};
  \node       at (3, -3) {$p_7$};
  \node       at (6, -3) {$p_4$};
  \node       at (7, -3) {$p_3$};
  \node       at (9, -3) {$p_1$};

  \node[rotate=320, anchor=west, xshift=-\widthof{$p_2$}] at (8, -3) {$p_2 = R_2(p_1, p_3)$};
  \node[rotate=320, anchor=west, xshift=-\widthof{$p_5$}] at (5, -3) {$p_5 = R_3(p_4, p_7)$};
  \node[rotate=320, anchor=west, xshift=-\widthof{$p_6$}] at (4, -3) {$p_6 = R_2(p_5, p_7)$};
  \node[rotate=320, anchor=west, xshift=-\widthof{$p_8$}] at (2, -3) {$p_8 = R_3(p_7, p_{10})$};
  \node[rotate=320, anchor=west, xshift=-\widthof{$p_9$}] at (1, -3) {$p_9 = R_2(p_8, p_{10})$};

  \node[left of=s'5] {$P_{1:T'}'$};
  \node[left of=s10] {$P_{1:T}$};
\end{tikzpicture}
%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../master"
%%% End:
